# NML v2.0 - Simplified for Thought Organization

## Design Philosophy
NML is designed for organizing markdown-based thoughts and ideas on an infinite canvas. It prioritizes simplicity, quick iteration, and visual connection of concepts over complex data flow.

## Core Structure

```xml
<nml version="2.0">
  <meta title="My Thoughts" created="2025-01-15" />
  <canvas zoom="1.0" center-x="0" center-y="0" />
  <pages>
    <!-- Individual markdown pages -->
  </pages>
  <links>
    <!-- Simple connections between pages -->
  </links>
</nml>
```

## Elements

### Document Metadata
```xml
<meta 
  title="AI Research Session" 
  created="2025-01-15" 
  modified="2025-01-16"
  author="John Doe"
  tags="ai,research,draft" />
```

### Canvas State
```xml
<canvas 
  zoom="1.0" 
  center-x="500" 
  center-y="300"
  grid="true"
  theme="dark" />
```

### Pages (Markdown Cards)
```xml
<page 
  id="intro" 
  x="100" 
  y="100" 
  width="300" 
  height="400"
  color="blue"
  created="2025-01-15T10:30:00Z">
  
  <title>Introduction to AI Ethics</title>
  
  <content><![CDATA[
# Introduction to AI Ethics

This came from my conversation with Claude about ethical considerations.

Key points to explore:
- Algorithmic bias in hiring
- Privacy concerns with personal data
- Need for AI transparency

## Next Steps
- Research current legislation
- Find case studies
- Connect with [[bias-examples]]
  ]]></content>
  
  <tags>important,ethics,starting-point</tags>
</page>
```

### Simple Connections
```xml
<links>
  <link from="intro" to="bias-examples" type="explores" />
  <link from="bias-examples" to="solutions" type="leads-to" />
  <link from="intro" to="privacy-notes" type="relates" />
</links>
```

## Page Colors & Themes
Simple color coding for visual organization:
- `red` - Urgent/Important
- `blue` - Information/Research  
- `green` - Solutions/Actions
- `yellow` - Questions/Ideas
- `purple` - References/Sources
- `gray` - Archive/Completed

## Connection Types
Basic relationship types:
- `explores` - This page explores concepts from another
- `leads-to` - Natural progression of thought
- `relates` - General connection/similarity
- `contradicts` - Opposing viewpoints
- `supports` - Evidence or examples
- `questions` - Raises questions about another page

## Cross-References in Markdown
Within content, reference other pages: `[[page-id]]` or `[[page-id|Custom Text]]`

## Complete Example

```xml
<?xml version="1.0" encoding="UTF-8"?>
<nml version="2.0">
  <meta 
    title="AI Ethics Research" 
    created="2025-01-15" 
    author="Researcher"
    tags="ai,ethics,research" />
  
  <canvas zoom="1.0" center-x="300" center-y="200" grid="true" />
  
  <pages>
    <page id="prompt" x="50" y="100" width="250" height="150" color="yellow">
      <title>Original Question</title>
      <content><![CDATA[
# Voice Prompt to Careless Whisper

"What are the main ethical concerns with AI in hiring?"

*Timestamp: 2025-01-15 10:30*
      ]]></content>
      <tags>prompt,voice-input</tags>
    </page>
    
    <page id="response" x="350" y="100" width="300" height="400" color="blue">
      <title>AI Ethics in Hiring</title>
      <content><![CDATA[
# AI Ethics in Hiring - LLM Response

## Key Concerns

**Algorithmic Bias**: AI systems can perpetuate existing biases present in training data, leading to discrimination against certain groups.

**Lack of Transparency**: Many AI hiring tools are "black boxes" where candidates and even employers don't understand how decisions are made.

**Data Privacy**: Extensive personal data collection raises concerns about privacy and data security.

## Current Examples
- Amazon scrapped their AI recruiting tool in 2018 due to bias against women
- HireVue faces scrutiny for facial analysis in interviews

## Regulatory Response
- EU AI Act includes provisions for high-risk AI systems
- NYC Local Law 144 requires bias audits for hiring AI

*Generated by Claude via Careless Whisper*
      ]]></content>
      <tags>ai-response,ethics,hiring</tags>
    </page>
    
    <page id="followup" x="700" y="150" width="280" height="200" color="green">
      <title>Follow-up Research</title>
      <content><![CDATA[
# Next Research Steps

Based on [[response]], I need to:

1. **Find specific case studies** 
   - Look into the Amazon hiring tool case
   - Research HireVue controversies
   
2. **Legal landscape**
   - Read NYC Local Law 144 details
   - EU AI Act hiring provisions
   
3. **Industry responses**
   - How are companies adapting?
   - Best practices emerging?

*Voice note: "Research Amazon hiring AI bias case study"*
      ]]></content>
      <tags>todo,research</tags>
    </page>
  </pages>
  
  <links>
    <link from="prompt" to="response" type="generated" />
    <link from="response" to="followup" type="leads-to" />
  </links>
</nml>
```

## Implementation Benefits

### For Careless Whisper Integration
1. **Quick Capture**: New pages can be created instantly from voice-generated content
2. **Visual Organization**: Responses naturally connect to prompts and follow-ups
3. **Iteration Friendly**: Easy to add new pages and adjust connections as thoughts evolve
4. **Search & Navigate**: Find content across all pages with full-text search

## Complete Example

```xml
<?xml version="1.0" encoding="UTF-8"?>
<nml version="2.0">
  <meta 
    title="AI Ethics Research" 
    created="2025-01-15T10:30:00Z" 
    author="Researcher"
    tags="ai,ethics,research" />
  
  <canvas zoom="1.0" center-x="300" center-y="200" grid="true" />
  
  <pages>
    <page id="prompt" x="50" y="100" width="250" height="150" color="yellow">
      <title>Original Question</title>
      <content><![CDATA[
# Voice Prompt to Careless Whisper

"What are the main ethical concerns with AI in hiring?"

*Timestamp: 2025-01-15 10:30*
      ]]></content>
      <tags>prompt,voice-input</tags>
    </page>
    
    <page id="response" x="350" y="100" width="300" height="400" color="blue">
      <title>AI Ethics in Hiring</title>
      <content><![CDATA[
# AI Ethics in Hiring - LLM Response

## Key Concerns

**Algorithmic Bias**: AI systems can perpetuate existing biases.

![Bias Illustration](./images/bias-diagram.svg)

See also: [[prompt]] for the original question.

*Generated by Claude via Careless Whisper*
      ]]></content>
      <tags>ai-response,ethics,hiring</tags>
    </page>
  </pages>
  
  <links>
    <link from="prompt" to="response" type="leads-to" />
  </links>
</nml>
```

## Implementation Notes

### For Parser Developers
- Use XML schema validation before processing content
- Validate all ID references before creating link structures  
- Handle CDATA sections properly to preserve markdown formatting
- Implement proper Unicode support for all text content

### For Application Developers  
- Store canvas state separately from document structure for performance
- Consider spatial indexing for large documents (>1000 pages)
- Implement incremental saving to avoid data loss
- Validate image paths exist before saving document

### Conformance Levels
- **Level 1**: Basic XML parsing and structure validation
- **Level 2**: Full validation including constraints and references  
- **Level 3**: Image path validation and markdown processing
- **Level 4**: Complete implementation with error recovery

This specification defines NML v2.0 as a complete, unambiguous standard for storing interconnected markdown content on infinite canvases.